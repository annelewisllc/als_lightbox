{"version":3,"sources":["als_lightbox.js"],"names":["alsLightbox","isEmpty","obj","prop","hasOwnProperty","thisScriptID","thisScript","document","querySelector","config","available","iframeURL","maxWidth","maxHeight","startDate","endDate","cookieName","cookieDuration","configFile","supplementalCSS","testMode","killSwitch","paths","jQuery","fancybox_js","fancybox_css","als_lightbox_css","external","active","setActiveConfig","setting","index","length","getAttribute","launch","getScript","url","success","script","createElement","src","head","getElementsByTagName","done","onload","onreadystatechange","this","readyState","removeChild","appendChild","createCookieAls","name","value","days","expires","date","Date","setTime","getTime","toGMTString","cookie","readCookieAls","nameEQ","ca","split","i","c","charAt","substring","indexOf","load_fancybox","$","fancybox","load_fancybox_css","execute_fancybox","fancybox_base_style_tag","rel","type","media","href","id","decorateLinksIfAnalytics","window","ga","tracker","linker","gaplugins","Linker","decorate","als_style_tag","alsSupplementalCSSTag","eventMethod","addEventListener","eventer","messageEvent","e","data","close","ready","prepend","todayDate","openEffect","closeEffect","openSpeed","closeSpeed","margin","padding","closeBtn","autoSize","autoScale","wrapCSS","scrollOutside","scrolling","height","width","helpers","overlay","locked","closeClick","tpl","wrap","trigger","enforceMinJQueryVersion","thisPageUsingOtherJSLibrary","fn","jquery","noConflict","xhr","XMLHttpRequest","open","encodeURI","status","JSON","parse","responseText","send","Drupal","behaviors","attach","err"],"mappings":"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","file":"als_lightbox.min.js","sourcesContent":["/*global ga:true, Drupal:true*/\n\n// Anne Lewis Strategies\n// Generalized lightbox asset\n// uses fancybox in iframe\n// Developed by by Ben Long <ben@annelewisllc.com> and Todd Plants <todd@annelewisllc.com>.\n\n// Create a global namespace for ALS Lightbox assets. All properties and helper functions flow from there.\n\nvar alsLightbox = function() {\n\n// Expected ID attribute of the script tag calling this script.\n// TODO Graceful failure if script tag is not identified correctly.\nalsLightbox.thisScriptID = \"als_lightbox_js\";\n\n// Searches for selector ('script[data-id=\"als_fancybox_js\"], #als_fancybox_js') or similar.\nalsLightbox.thisScript = document.querySelector('script[data-id=\"' + alsLightbox.thisScriptID + '\"], #' +\n  alsLightbox.thisScriptID);\n\n// Create alsLightbox.config object. Object will eventually have four children:\n// 1 - alsLightbox.config.available: The list of available config options.\n// 2 - alsLightbox.config.paths: Paths to dependencies- jQuery, fancybox, and ALS lightbox CSS assets\n// 3 - alsLightbox.config.external: Config options from \"external\" json if specified. This will override any\n//     data-attributes.\n// 4 - alsLightbox.config.active: The active config options that will ultimately govern execution of the script.\nalsLightbox.config = {};\n\n// OK to be hard-coded because this is the definitive list of supported options. Set by us as the developers.\n// Note that some available options have dash-style names (not recommened in javascript) and new camelCase names.\nalsLightbox.config.available = {\n\t\"iframeURL\": [\"iframe-url\",\"iframeURL\"],\n  \"maxWidth\": [\"max-width\",\"maxWidth\"],\n  \"maxHeight\": [\"max-height\",\"maxHeight\"],\n\t\"startDate\": [\"start-date\",\"startDate\"],\n\t\"endDate\": [\"end-date\",\"endDate\"],\n\t\"cookieName\": [\"cookie-name\",\"cookieName\"],\n\t\"cookieDuration\": [\"cookie-duration\",\"cookieDuration\"],\n\t\"configFile\": [\"configFile\"],\n\t\"supplementalCSS\": [\"supplementalCSS\"],\n\t\"testMode\": [\"test-mode\",\"testMode\"],\n\t\"killSwitch\": [\"killSwitch\"]\n};\n\n// Specify paths to dependencies.\nalsLightbox.config.paths = {\n\t\"jQuery\": \"//code.jquery.com/jquery-latest.min.js\",\n\t\"fancybox_js\": \"//s3.amazonaws.com/annelewisllc/lightbox/src/bower_components/fancybox/source/jquery.fancybox.pack.als.js\",\n\t\"fancybox_css\": \"//s3.amazonaws.com/annelewisllc/lightbox/src/bower_components/fancybox/source/jquery.fancybox.css\",\n\t\"als_lightbox_css\": \"//s3.amazonaws.com/annelewisllc/lightbox/src/css/als_lightbox.css\"\n};\n\n\n\n// Relative paths for localhost testing. Uncomment lines below.\n// alsLightbox.config.paths = {\n// \t\"jQuery\": \"bower_components/jquery/dist/jquery.min.js\",\n// \t\"fancybox_js\": \"bower_components/fancybox/source/jquery.fancybox.pack.als.js\",\n// \t\"fancybox_css\": \"bower_components/fancybox/source/jquery.fancybox.css\",\n// \t\"als_lightbox_css\": \"css/als_lightbox.css\"\n// };\n\n// Create objects.\nalsLightbox.config.external = {};\nalsLightbox.config.active = {};\n\n// Helper function. Determine whether a javascript object is, in fact, empty.\nfunction isEmpty(obj) {\n  for(var prop in obj) {\n    if(obj.hasOwnProperty(prop)) { return false; }\n  }\n  return true;\n}\n\n// If alsLightbox.config.external is not empty, make it the active config.\n// Otherwise, cycle through the available options. If the option is specified in the data- attributes,\n// make them active.\nalsLightbox.setActiveConfig = function() {\n\tif (!isEmpty(alsLightbox.config.external)) {\n\t\talsLightbox.config.active = alsLightbox.config.external;\n\t} else {\n\t\tfor (var setting in alsLightbox.config.available) {\n\t\t\tfor (var index = 0; index < alsLightbox.config.available[setting].length; index++) {\n\t\t\t\talsLightbox.config.active[setting] = alsLightbox.thisScript.getAttribute('data-' + alsLightbox.config.available[setting][index]);\n\t\t\t\tif (alsLightbox.config.active[setting]) { break; }\n\t\t\t}\n\t\t}\n\t}\n};\n\n// This is the main logic of this tool. In future iterations, it probably can and should be broken up into\n// more discrete sections.\nalsLightbox.launch = function () {\n\n  // Allows for developers (ALS) to disable lightbox \"remotely.\"\n  if (alsLightbox.config.active.killSwitch) { return; }\n\n\tvar enforceMinJQueryVersion = '1.6'; // Minimum required jQuery version.\n\n\t// Helper functions.\n\n\tfunction getScript(url, success) {\n\n\t\tvar script = document.createElement('script');\n\t\t\tscript.src = url;\n\n\t\tvar head = document.getElementsByTagName('head')[0],\n\t\tdone = false;\n\n\t\t// Attach handlers for all browsers\n\t\tscript.onload = script.onreadystatechange = function() {\n\n\t\t\tif (!done && (!this.readyState || this.readyState === 'loaded' || this.readyState === 'complete')) {\n\n\t\t\tdone = true;\n\n\t\t\t\t// callback function provided as param\n\t\t\t\tsuccess();\n\n\t\t\t\tscript.onload = script.onreadystatechange = null;\n\t\t\t\thead.removeChild(script);\n\n\t\t\t}\n\n\t\t};\n\n\t\thead.appendChild(script);\n\n\t}\n\n  // Function to create a browser cookie.\n  function createCookieAls(name,value,days) {\n\t\tvar expires = '';\n    if (days) {\n\t\t\tvar date = new Date();\n\t\t\tdate.setTime(date.getTime()+(days*24*60*60*1000));\n\t\t\texpires = \"; expires=\"+date.toGMTString();\n\t\t} else {\n      expires = '';\n    }\n\t\tdocument.cookie = name+\"=\"+value+expires+\"; path=/\";\n\t}\n\n\t// Function to read a browser cookie.\n  function readCookieAls(name) {\n\t\tvar nameEQ = name + \"=\";\n\t\tvar ca = document.cookie.split(';');\n\t\tfor(var i=0;i < ca.length;i++) {\n\t\t\tvar c = ca[i];\n\t\t\twhile (c.charAt(0)===' ') { c = c.substring(1,c.length); }\n\t\t\tif (c.indexOf(nameEQ) === 0) { return c.substring(nameEQ.length,c.length); }\n\t\t}\n\t\treturn null;\n\t}\n\n\t// Load jQuery if not present.\n  // Technique from http://css-tricks.com/snippets/jquery/load-jquery-only-if-not-present/\n\n\tvar thisPageUsingOtherJSLibrary = false;\n\n\t// Only do anything if jQuery isn't defined\n\tif ( ( typeof jQuery === 'undefined' ) || ( jQuery.fn.jquery < enforceMinJQueryVersion ) ) {\n\t\tif (typeof $ === 'function') {\n\t\t\t// warning, global var\n\t\t\tthisPageUsingOtherJSLibrary = true;\n\t\t}\n\n\t\tgetScript(alsLightbox.config.paths.jQuery, function() {\n\t\t\tif (typeof jQuery === 'undefined') {\n\t\t\t\t// Super failsafe - still somehow failed...\n\t\t\t} else {\n\t\t\t\t// jQuery loaded! Make sure to use .noConflict just in case\n        // Assign new jQuery to namespace and release from all other uses.\n\t\t\t\talsLightbox.jQuery = jQuery.noConflict(true);\n\n        // Now that jQuery is in the namespace, start running functions that need it.\n        (function($) { load_fancybox($); })(alsLightbox.jQuery);\n\n        // Placeholder\n        if (thisPageUsingOtherJSLibrary) {} else {}\n\t\t\t}\n\t\t});\n\n\t} else { // jQuery was already loaded\n    // Assign existing jQuery to namespace, but do not release from global var.\n    alsLightbox.jQuery = jQuery;\n    // Now that jQuery is in the namespace, start running functions that need it.\n    (function($) { load_fancybox($); })(alsLightbox.jQuery);\n\t}\n\n\n\n\n\t// Load Fancybox if not present.\n\n\tfunction load_fancybox($) {\n\n\t\tif(typeof $.fancybox === 'function') {\n\t\t\t load_fancybox_css($);\n\t\t\t execute_fancybox($);\n\t\t} else {\n      // Use $.getScript to make sure that the current local version of $ (alsLightbox.jQuery) stays in scope.\n      $.getScript(alsLightbox.config.paths.fancybox_js, function(){\n        load_fancybox_css($);\n        execute_fancybox($);\n      });\n\t\t}\n\n\t}\n\n\t// Load Fancybox CSS if not present.\n\n\tfunction load_fancybox_css($) {\n\t\tif (!$('link[href$=\"jquery.fancybox.css\"]').length) {\n\t\t\tvar fancybox_base_style_tag = document.createElement('link');\n\t\t\t\tfancybox_base_style_tag.rel  = 'stylesheet';\n\t\t\t\tfancybox_base_style_tag.type = 'text/css';\n\t\t\t\tfancybox_base_style_tag.media = 'screen';\n\t\t\t\tfancybox_base_style_tag.href = alsLightbox.config.paths.fancybox_css;\n\t\t\t\tfancybox_base_style_tag.id = 'als_fancybox_base_style_tag';\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(fancybox_base_style_tag);\n\t\t}\n\t}\n\n\t// Execute fancybox implementation.\n\n\tfunction execute_fancybox($) {\n\n\t\t// Add base ALS styling CSS file.\n\t\tvar als_style_tag = document.createElement('link');\n\t\t\tals_style_tag.rel  = 'stylesheet';\n\t\t\tals_style_tag.type = 'text/css';\n\t\t\tals_style_tag.media = 'all';\n\t\t\tals_style_tag.href = alsLightbox.config.paths.als_lightbox_css;\n\t\tdocument.getElementsByTagName('head')[0].appendChild(als_style_tag);\n\n    // Add site-specific supplemental CSS if one exists.\n    if (alsLightbox.config.active.supplementalCSS) {\n      var alsSupplementalCSSTag = document.createElement('link');\n  \t\t\talsSupplementalCSSTag.rel  = 'stylesheet';\n  \t\t\talsSupplementalCSSTag.type = 'text/css';\n  \t\t\talsSupplementalCSSTag.media = 'all';\n  \t\t\talsSupplementalCSSTag.href = alsLightbox.config.active.supplementalCSS;\n  \t\tdocument.getElementsByTagName('head')[0].appendChild(alsSupplementalCSSTag);\n    }\n\n\t\t// Add postMessage listener to allow child iframe to close itself.\n\n\t\t// Create IE + others compatible event handler\n\t\tvar eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\n\t\tvar eventer = window[eventMethod];\n\t\tvar messageEvent = eventMethod === \"attachEvent\" ? \"onmessage\" : \"message\";\n\n\t\t// Listen to message from child window\n\t\teventer(messageEvent,function(e) {\n\t\t\tif (e.data === 'fancybox.close') {\n\t\t\t\t$.fancybox.close();\n\t\t\t}\n\t\t},false);\n\n\t/* -------\n\tDisable ability for child iframe to resize itself.\n\n\t\t// Add postMessage listeners to allow child iframe to resize itself.\n\t\tvar postMessage_height = 0;\n\t\teventer(messageEvent,function(e) {\n\t\t\tif (/fancybox\\.height\\('{0,1}\\d+'{0,1}\\)/.test(e.data)) {\n\t\t\t\t$(document).ready(function() {\n\n\t\t\t\t\tpostMessage_height = parseInt(e.data.match(/fancybox\\.height\\('{0,1}(\\d+)'{0,1}\\)/)[1]);\n\t\t\t\t\tfancybox_change_height(postMessage_height);\n\n\t\t\t\t});\n\t\t\t}\n\t\t},false);\n\n\t\tfunction fancybox_change_height(h) {\n\t\t\t$(\".als-fancybox-inner\").css({\n\t\t\t\theight: h\n\t\t\t});\n\t\t}\n\n\t\tvar postMessage_width = 0;\n\t\teventer(messageEvent,function(e) {\n\t\t\tif (/fancybox\\.width\\('{0,1}\\d+'{0,1}\\)/.test(e.data)) {\n\t\t\t\t$(document).ready(function() {\n\n\t\t\t\t\tpostMessage_width = parseInt(e.data.match(/fancybox\\.width\\('{0,1}(\\d+)'{0,1}\\)/)[1]);\n\t\t\t\t\tfancybox_change_width(postMessage_width);\n\n\t\t\t\t});\n\t\t\t}\n\t\t},false);\n\n\t\tfunction fancybox_change_width(w) {\n\t\t\t$(\".als-fancybox-inner, .als-fancybox-wrap\").css({\n\t\t\t\twidth: w\n\t\t\t});\n\t\t}\n\n\t------- */\n\n\t\t// Set URL paramter for cross-domain analytics tracking.\n\n\t\tfunction decorateLinksIfAnalytics(url) {\n\t\t\tif(window.ga) {\n\t\t\t\tga(function(tracker) {\n\t\t\t\t\tvar linker = new window.gaplugins.Linker(tracker);\n\t\t\t\t\turl = linker.decorate(url);\t\t// Appends query string parameter to URL that allows for cross-domain analytics tracking. Requires companion call in URL source. More: https://developers.google.com/analytics/devguides/collection/analyticsjs/cross-domain#decorate\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn url;\n\t\t}\n\n\t\t$(document).ready(function( $ ) {\n\n\t\t\t$('body').prepend('<div id=\"als_lightbox\" style=\"display:none;\"></div>');\n\n\t\t\tvar todayDate = new Date();\n\n\t\t\t//defaults\n\t\t\tif(!alsLightbox.config.active.cookieName) {\n\t\t\t\talsLightbox.config.active.cookieName = \"als_lightbox\";\n\t\t\t}\n\t\t\tif(!alsLightbox.config.active.cookieDuration) {\n\t\t\t\talsLightbox.config.active.cookieDuration = 1;\n\t\t\t}\n\t\t\tif(!alsLightbox.config.active.startDate) {\n\t\t\t\talsLightbox.config.active.startDate = \"January 1, 1970 00:00:00\";\n\t\t\t}\n\t\t\tif(!alsLightbox.config.active.endDate) {\n\t\t\t\talsLightbox.config.active.endDate = \"January 1, 2038 00:00:00\";\n\t\t\t}\n\n\t\t\t$(\"#als_lightbox\").fancybox({\n\t\t\t\topenEffect: 'fade',\n\t\t\t\tcloseEffect: 'fade',\n\t\t\t\topenSpeed: 500,\n\t\t\t\tcloseSpeed: 250,\n\t\t\t\tmargin: 0,\n\t\t\t\tpadding: 0,\n\t\t\t\tcloseBtn: true,\n\t\t\t\tautoSize: true,\n\t\t\t\tautoScale: false,\n\t\t\t\twrapCSS: 'als_fancybox',\n\t\t\t\tscrollOutside: true, //If true, the script will try to avoid horizontal scrolling for iframes and html content\n\t\t\t\tscrolling: 'no',\n\t\t\t\tmaxHeight: alsLightbox.config.active.maxHeight,\n\t\t\t\tmaxWidth: alsLightbox.config.active.maxWidth,\n\t\t\t\theight: '100%',\n\t\t\t\twidth: '100%',\n\t\t\t\thref: decorateLinksIfAnalytics(alsLightbox.config.active.iframeURL),\n\t\t\t\ttype: 'iframe',\n\t\t\t\thelpers: {\n\t\t\t\t\toverlay: {\n\t\t\t\t\t\tlocked: true,\n\t\t\t\t\t\tcloseClick: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttpl: {\n\t\t\t\t\twrap     : '<div class=\"als-fancybox-wrap fancybox-wrap\" tabIndex=\"-1\"><div class=\"als-fancybox-skin fancybox-skin\"><div class=\"fancybox-outer\"><div class=\"fancybox-inner als-fancybox-inner\"></div></div></div></div>',\n\t\t\t\t\tcloseBtn : '<div class=\"als-fancybox-close-wrap\"><a title=\"Close\" class=\"fancybox-item als-fancybox-close fancybox-close hide-on-mobile\" href=\"javascript:;\"></a><a title=\"Close\" class=\"fancybox-item als-fancybox-close-mobile fancybox-close\" href=\"javascript:;\"><button>Continue to Site &gt;&gt;</button></a></div>'\n\t\t\t\t}\n\t// \t\t\t, onUpdate: function() {\n\t//\t\t\t\t\t// Necessary to allow child frame to resize itself.\n\t//  \t\t\t\tif(postMessage_height != 0) { fancybox_change_height(postMessage_height); }\n\t//  \t\t\t\tif(postMessage_width != 0) { fancybox_change_width(postMessage_width); }\n\t// \t\t\t}\n\t\t\t});\n\n\n\t\t\tif(\n\t\t\t\t(!readCookieAls(alsLightbox.config.active.cookieName) &&\n\t\t\t\ttodayDate > new Date(alsLightbox.config.active.startDate) &&\n\t\t\t\ttodayDate < new Date(alsLightbox.config.active.endDate)\n\t\t\t) || (\n\t\t\t\talsLightbox.config.active.testMode >= 1 || // Legacy support for values of 1 and 0.\n        alsLightbox.config.active.testMode === 'true' // Support for string \"true\" in script tag's data- attributes.\n\t\t\t)) {\n\t\t\t\t$(\"#als_lightbox\").trigger('click');\n\t\t\t\tcreateCookieAls(alsLightbox.config.active.cookieName,1,alsLightbox.config.active.cookieDuration);\n\t\t\t}\n\n\t\t});\n\n\t}\n\n};    // End alsLightbox.launch\n\n// If this script's HTML tag element has a configFile specified, use that value as the path to the config JSON.\n// Otherwise, use empty string.\nalsLightbox.config.active.configFile = alsLightbox.thisScript.getAttribute('data-configFile') ?\n  alsLightbox.thisScript.getAttribute('data-configFile') : '';\n\n// If there's a config file specified, go get the JSON. Then use it to set the active config and launch the lightbox.\n// Otherwise, just set the active config and launch the lightbox without external config JSON.\nif (alsLightbox.config.active.configFile) {\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', encodeURI(alsLightbox.config.active.configFile));\n  xhr.onload = function() {\n      if (xhr.status === 200) {\n        alsLightbox.config.external = JSON.parse(xhr.responseText);\n        alsLightbox.setActiveConfig();\n        alsLightbox.launch();\n      }\n      else {\n        alsLightbox.setActiveConfig();\n        alsLightbox.launch();\n      }\n  };\n  xhr.send();\n} else {\n  alsLightbox.setActiveConfig();\n  alsLightbox.launch();\n}\n\n};\n\n// Add support for Drupal behaviors. Drupal has a weird way of handling jQuery and document ready.\n// Basically you have to register your script as a \"behavior.\"\n// This implementation should throw an error if Drupal.behaviors doesn't exist, but try/catch means the script\n// will just move on. Either way, we run the big master namespace function.\ntry {\n\tDrupal.behaviors.alsLightbox = {\n\t  attach: function () {\n      alsLightbox();\n\t\t}\n\t};\n}\ncatch(err) {\n  alsLightbox();\n}\n"],"sourceRoot":"/source/"}