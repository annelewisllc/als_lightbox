function isEmpty(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var alsLightbox={};alsLightbox.thisScriptID="als_fancybox_js",alsLightbox.thisScript=document.querySelector('script[data-id="'+alsLightbox.thisScriptID+'"], #'+alsLightbox.thisScriptID),alsLightbox.config={},alsLightbox.config.available={maxWidth:["max-width","maxWidth"],maxHeight:["max-height","maxHeight"],iframeURL:["iframe-url","iframeURL"],startDate:["start-date","startDate"],endDate:["end-date","endDate"],cookieName:["cookie-name","cookieName"],cookieDuration:["cookie-duration","cookieDuration"],configFile:["configFile"],supplementalCSS:["supplementalCSS"],testMode:["test-mode","testMode"],killSwitch:["killSwitch"]},alsLightbox.config.paths={jQuery:"//code.jquery.com/jquery-latest.min.js",fancybox_js:"//s3.amazonaws.com/clintonfoundation/lightbox/bower_components/fancybox/source/jquery.fancybox.pack.js",fancybox_css:"//s3.amazonaws.com/clintonfoundation/lightbox/bower_components/fancybox/source/jquery.fancybox.css",als_lightbox_css:"//s3.amazonaws.com/clintonfoundation/lightbox/css/als_lightbox.css"},alsLightbox.config.active={},alsLightbox.config.external={},alsLightbox.config.active.configFile=alsLightbox.thisScript.getAttribute("data-configFile"),$.getJSON(alsLightbox.config.active.configFile?alsLightbox.config.active.configFile:"",function(t){alsLightbox.config.external=t,alsLightbox.setActiveConfig(),alsLightbox.launch()}).fail(function(){alsLightbox.setActiveConfig(),alsLightbox.launch()}),alsLightbox.setActiveConfig=function(){if(isEmpty(alsLightbox.config.external))for(var t in alsLightbox.config.available)for(var e=0;e<alsLightbox.config.available[t].length&&(alsLightbox.config.active[t]=alsLightbox.thisScript.getAttribute("data-"+alsLightbox.config.available[t][e]),!alsLightbox.config.active[t]);e++);else alsLightbox.config.active=alsLightbox.config.external},alsLightbox.launch=function(){function t(t,e){var i=document.createElement("script");i.src=t;var a=document.getElementsByTagName("head")[0],o=!1;i.onload=i.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,e(),i.onload=i.onreadystatechange=null,a.removeChild(i))},a.appendChild(i)}function e(t,e,i){if(i){var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3);var o="; expires="+a.toGMTString()}else var o="";document.cookie=t+"="+e+o+"; path=/"}function i(t){for(var e=t+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var o=i[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return null}function a(t){createCookie(t,"",-1)}function o($){"function"==typeof $.fancybox?(n($),c($)):t(alsLightbox.config.paths.fancybox_js,function(){"function"!=typeof $.fancybox||(n($),c($))})}function n($){if(!$('link[href$="jquery.fancybox.css"]').length){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.media="screen",t.href=alsLightbox.config.paths.fancybox_css,t.id="als_fancybox_base_style_tag",document.getElementsByTagName("head")[0].appendChild(t)}}function c($){function t(t){return window.ga&&ga(function(e){var i=new window.gaplugins.Linker(e);t=i.decorate(t)}),t}function a(t,e){return"undefined"!=typeof lightboxConfigOverride&&lightboxConfigOverride[e]?lightboxConfigOverride[e]:t}var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.media="all",o.href=alsLightbox.config.paths.als_lightbox_css,document.getElementsByTagName("head")[0].appendChild(o);var n=window.addEventListener?"addEventListener":"attachEvent",c=window[n],s="attachEvent"==n?"onmessage":"message";c(s,function(t){"fancybox.close"==t.data&&jQuery.fancybox.close()},!1),$(document).ready(function($){$("body").prepend('<div id="als_lightbox" style="display:none;"></div>');var t=new Date;alsLightbox.config.active.cookieName||(alsLightbox.config.active.cookieName="fancybox_als"),alsLightbox.config.active.cookieDuration||(alsLightbox.config.active.cookieDuration=1),alsLightbox.config.active.startDate||(alsLightbox.config.active.startDate="January 1, 1970 00:00:00"),alsLightbox.config.active.endDate||(alsLightbox.config.active.endDate="January 1, 2038 00:00:00"),$("#als_lightbox").fancybox({openEffect:"fade",closeEffect:"fade",openSpeed:500,closeSpeed:250,margin:0,padding:0,closeBtn:!0,autoSize:!0,autoScale:!1,wrapCSS:"als_fancybox",scrollOutside:!0,scrolling:"no",maxHeight:alsLightbox.config.active.maxHeight,maxWidth:alsLightbox.config.active.maxWidth,height:"100%",width:"100%",href:alsLightbox.config.active.iframeURL,type:"iframe",helpers:{overlay:{locked:!0,closeClick:!0}},tpl:{wrap:'<div class="als-fancybox-wrap fancybox-wrap" tabIndex="-1"><div class="als-fancybox-skin fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner als-fancybox-inner"></div></div></div></div>',closeBtn:'<div class="als-fancybox-close-wrap"><a title="Close" class="fancybox-item als-fancybox-close fancybox-close hide-on-mobile" href="javascript:;"></a><a title="Close" class="fancybox-item als-fancybox-close-mobile fancybox-close" href="javascript:;"><button>Continue to Site &gt;&gt;</button></a></div>'}}),(!i(alsLightbox.config.active.cookieName)&&t>new Date(alsLightbox.config.active.startDate)&&t<new Date(alsLightbox.config.active.endDate)||alsLightbox.config.active.testMode>=1)&&($("#als_lightbox").trigger("click"),e(alsLightbox.config.active.cookieName,1,alsLightbox.config.active.cookieDuration))})}if(!alsLightbox.config.active.killSwitch){var s="1.6",l=!1;"undefined"==typeof jQuery||jQuery.fn.jquery<s?("function"==typeof $&&(l=!0),t(alsLightbox.config.paths.jQuery,function(){"undefined"==typeof jQuery||(jQuery.noConflict(),function($){o($)}(jQuery))})):o($)}};
//# sourceMappingURL=./als_lightbox.min.js.map