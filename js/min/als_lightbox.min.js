var alsLightbox=function(){alsLightbox.thisScriptID="als_lightbox_js";alsLightbox.thisScript=document.querySelector('script[data-id="'+alsLightbox.thisScriptID+'"], #'+alsLightbox.thisScriptID);alsLightbox.config={};alsLightbox.config.available={iframeURL:["iframe-url","iframeURL"],maxWidth:["max-width","maxWidth"],maxHeight:["max-height","maxHeight"],startDate:["start-date","startDate"],endDate:["end-date","endDate"],cookieName:["cookie-name","cookieName"],cookieDuration:["cookie-duration","cookieDuration"],configFile:["configFile"],supplementalCSS:["supplementalCSS"],testMode:["test-mode","testMode"],killSwitch:["killSwitch"],blacklist:["blacklist"]};alsLightbox.config.paths={jQuery:"https://code.jquery.com/jquery-latest.min.js",fancybox_js:"https://s3.amazonaws.com/annelewisllc/lightbox/src/bower_components/fancybox/source/jquery.fancybox.pack.als.js",fancybox_css:"https://s3.amazonaws.com/annelewisllc/lightbox/src/bower_components/fancybox/source/jquery.fancybox.css",als_lightbox_css:"https://s3.amazonaws.com/annelewisllc/lightbox/src/css/als_lightbox.css"};alsLightbox.config.external={};alsLightbox.config.active={};function isEmpty(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){return false}}return true}alsLightbox.setActiveConfig=function(){if(!isEmpty(alsLightbox.config.external)){alsLightbox.config.active=alsLightbox.config.external}else{for(var setting in alsLightbox.config.available){for(var index=0;index<alsLightbox.config.available[setting].length;index++){alsLightbox.config.active[setting]=alsLightbox.thisScript.getAttribute("data-"+alsLightbox.config.available[setting][index]);if(alsLightbox.config.active[setting]){break}}}}};alsLightbox.launch=function(){if(alsLightbox.config.active.killSwitch){return}if(alsLightbox.config.active.blacklist.length>0){var blacklistArray=new RegExp(alsLightbox.config.active.blacklist.join("|"),"i");if(window.location.href.match(blacklistArray)!==null){return}}var enforceMinJQueryVersion="1.6";function getScript(url,success){var script=document.createElement("script");script.src=url;var head=document.getElementsByTagName("head")[0],done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;success();script.onload=script.onreadystatechange=null;head.removeChild(script)}};head.appendChild(script)}function createCookieAls(name,value,days){var expires="";if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);expires="; expires="+date.toGMTString()}else{expires=""}document.cookie=name+"="+value+expires+"; path=/"}function readCookieAls(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)===0){return c.substring(nameEQ.length,c.length)}}return null}var thisPageUsingOtherJSLibrary=false;if(typeof jQuery==="undefined"||jQuery.fn.jquery<enforceMinJQueryVersion){if(typeof $==="function"){thisPageUsingOtherJSLibrary=true}getScript(alsLightbox.config.paths.jQuery,function(){if(typeof jQuery==="undefined"){}else{alsLightbox.jQuery=jQuery.noConflict(true);(function($){load_fancybox($)})(alsLightbox.jQuery);if(thisPageUsingOtherJSLibrary){}else{}}})}else{alsLightbox.jQuery=jQuery;(function($){load_fancybox($)})(alsLightbox.jQuery)}function load_fancybox($){if(typeof $.fancybox==="function"){load_fancybox_css($);execute_fancybox($)}else{$.getScript(alsLightbox.config.paths.fancybox_js,function(){load_fancybox_css($);execute_fancybox($)})}}function load_fancybox_css($){if(!$('link[href$="jquery.fancybox.css"]').length){var fancybox_base_style_tag=document.createElement("link");fancybox_base_style_tag.rel="stylesheet";fancybox_base_style_tag.type="text/css";fancybox_base_style_tag.media="screen";fancybox_base_style_tag.href=alsLightbox.config.paths.fancybox_css;fancybox_base_style_tag.id="als_fancybox_base_style_tag";document.getElementsByTagName("head")[0].appendChild(fancybox_base_style_tag)}}function execute_fancybox($){var als_style_tag=document.createElement("link");als_style_tag.rel="stylesheet";als_style_tag.type="text/css";als_style_tag.media="all";als_style_tag.href=alsLightbox.config.paths.als_lightbox_css;document.getElementsByTagName("head")[0].appendChild(als_style_tag);if(alsLightbox.config.active.supplementalCSS){var alsSupplementalCSSTag=document.createElement("link");alsSupplementalCSSTag.rel="stylesheet";alsSupplementalCSSTag.type="text/css";alsSupplementalCSSTag.media="all";alsSupplementalCSSTag.href=alsLightbox.config.active.supplementalCSS;document.getElementsByTagName("head")[0].appendChild(alsSupplementalCSSTag)}var eventMethod=window.addEventListener?"addEventListener":"attachEvent";var eventer=window[eventMethod];var messageEvent=eventMethod==="attachEvent"?"onmessage":"message";eventer(messageEvent,function(e){if(e.data==="fancybox.close"){$.fancybox.close()}},false);function decorateLinksIfAnalytics(url){if(window.ga){ga(function(tracker){var linker=new window.gaplugins.Linker(tracker);url=linker.decorate(url)})}return url}$(document).ready(function($){$("body").prepend('<div id="als_lightbox" style="display:none;"></div>');var todayDate=new Date;if(!alsLightbox.config.active.cookieName){alsLightbox.config.active.cookieName="als_lightbox"}if(!alsLightbox.config.active.cookieDuration){alsLightbox.config.active.cookieDuration=1}if(!alsLightbox.config.active.startDate){alsLightbox.config.active.startDate="January 1, 1970 00:00:00"}if(!alsLightbox.config.active.endDate){alsLightbox.config.active.endDate="January 1, 2038 00:00:00"}$("#als_lightbox").fancybox({openEffect:"fade",closeEffect:"fade",openSpeed:500,closeSpeed:250,margin:0,padding:0,closeBtn:true,autoSize:true,autoScale:false,wrapCSS:"als_fancybox",scrollOutside:true,scrolling:"no",maxHeight:alsLightbox.config.active.maxHeight,maxWidth:alsLightbox.config.active.maxWidth,height:"100%",width:"100%",href:decorateLinksIfAnalytics(alsLightbox.config.active.iframeURL),type:"iframe",helpers:{overlay:{locked:true,closeClick:true}},tpl:{wrap:'<div class="als-fancybox-wrap fancybox-wrap" tabIndex="-1"><div class="als-fancybox-skin fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner als-fancybox-inner"></div></div></div></div>',closeBtn:'<div class="als-fancybox-close-wrap"><a title="Close" class="fancybox-item als-fancybox-close fancybox-close hide-on-mobile" href="javascript:;"></a><a title="Close" class="fancybox-item als-fancybox-close-mobile fancybox-close" href="javascript:;"><button>Continue to Site &gt;&gt;</button></a></div>'}});if(!readCookieAls(alsLightbox.config.active.cookieName)&&todayDate>new Date(alsLightbox.config.active.startDate)&&todayDate<new Date(alsLightbox.config.active.endDate)||(alsLightbox.config.active.testMode>=1||alsLightbox.config.active.testMode==="true")){$("#als_lightbox").trigger("click");createCookieAls(alsLightbox.config.active.cookieName,1,alsLightbox.config.active.cookieDuration)}})}};alsLightbox.config.active.configFile=alsLightbox.thisScript.getAttribute("data-configFile")?alsLightbox.thisScript.getAttribute("data-configFile"):"";if(alsLightbox.config.active.configFile){var xhr=new XMLHttpRequest;xhr.open("GET",encodeURI(alsLightbox.config.active.configFile));xhr.onload=function(){if(xhr.status===200){alsLightbox.config.external=JSON.parse(xhr.responseText);alsLightbox.setActiveConfig();alsLightbox.launch()}else{alsLightbox.setActiveConfig();alsLightbox.launch()}};xhr.send()}else{alsLightbox.setActiveConfig();alsLightbox.launch()}};try{Drupal.behaviors.alsLightbox={attach:function(){alsLightbox()}}}catch(err){alsLightbox()}
//# sourceMappingURL=./als_lightbox.min.js.map